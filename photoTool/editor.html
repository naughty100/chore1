<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>书签卡片编辑器</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="app-container">
        <header class="app-header">
            <h1>书签卡片编辑器</h1>
            <div class="header-actions">
                <button id="exportBtn" class="btn primary">导出书签</button>
            </div>
        </header>

        <main class="app-main">
            <!-- 左侧编辑器面板 - 专注于背景板和书签的展示 -->
            <div class="editor-panel">
                <div class="background-board">
                    <div class="canvas-container">
                        <canvas id="bookmarkCanvas" width="200" height="600">
                            您的浏览器不支持HTML5 Canvas元素
                        </canvas>
                        <div class="canvas-controls">
                            <button id="zoomInBtn" class="btn small">+</button>
                            <span id="zoomLevel">100%</span>
                            <button id="zoomOutBtn" class="btn small">-</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 右侧控制面板 -->
            <div class="controls-panel">
                <div class="tabs">
                    <button class="tab-btn active" data-tab="background">背景</button>
                    <button class="tab-btn" data-tab="board">背景板</button>
                    <button class="tab-btn" data-tab="position">位置</button>
                    <button class="tab-btn" data-tab="shadow">阴影</button>
                </div>

                <div class="tab-content">
                    <!-- 背景设置面板 -->
                    <div class="tab-pane active" id="background-tab">
                        <h3>背景类型</h3>
                        <div class="control-group">
                            <label>
                                <input type="radio" name="bgType" value="solid" checked>
                                纯色背景
                            </label>
                            <label>
                                <input type="radio" name="bgType" value="gradient">
                                渐变背景
                            </label>
                            <label>
                                <input type="radio" name="bgType" value="image">
                                图片背景
                            </label>
                            <label>
                                <input type="radio" name="bgType" value="pattern">
                                几何图案
                            </label>
                        </div>

                        <!-- 纯色背景设置 -->
                        <div class="bg-settings" id="solid-settings">
                            <div class="control-group">
                                <label for="bgColor">背景颜色</label>
                                <input type="color" id="bgColor" value="#8B0000">
                            </div>
                        </div>

                        <!-- 渐变背景设置 -->
                        <div class="bg-settings" id="gradient-settings" style="display: none;">
                            <div class="control-group">
                                <label for="gradientType">渐变类型</label>
                                <select id="gradientType">
                                    <option value="linear">线性渐变</option>
                                    <option value="radial">径向渐变</option>
                                </select>
                            </div>
                            <div class="control-group">
                                <label for="gradientAngle">渐变角度</label>
                                <input type="range" id="gradientAngle" min="0" max="360" value="45">
                                <span id="gradientAngleValue">45°</span>
                            </div>
                            <div class="control-group">
                                <label>渐变颜色</label>
                                <div class="gradient-colors">
                                    <div class="color-stop">
                                        <input type="color" class="gradient-color" value="#FF0000">
                                        <input type="range" class="gradient-position" min="0" max="100" value="0">
                                        <span class="position-value">0%</span>
                                    </div>
                                    <div class="color-stop">
                                        <input type="color" class="gradient-color" value="#0000FF">
                                        <input type="range" class="gradient-position" min="0" max="100" value="100">
                                        <span class="position-value">100%</span>
                                    </div>
                                </div>
                                <button id="addColorStop" class="btn small">添加颜色</button>
                            </div>
                        </div>

                        <!-- 图片背景设置 -->
                        <div class="bg-settings" id="image-settings" style="display: none;">
                            <div class="control-group">
                                <label for="bgImage">选择图片</label>
                                <input type="file" id="bgImage" accept="image/*">
                            </div>

                            <!-- 图片区域选择 -->
                            <div class="control-group" id="imageCropContainer" style="display: none;">
                                <label>选择区域</label>
                                <div class="image-crop-wrapper">
                                    <div class="image-crop-area">
                                        <img id="cropPreviewImage" src="" alt="预览图">
                                        <div id="cropSelection" class="crop-selection"></div>
                                    </div>
                                </div>
                                <div class="crop-controls">
                                    <button id="applyCropBtn" class="btn small">应用选区</button>
                                    <button id="resetCropBtn" class="btn small">重置选区</button>
                                </div>
                            </div>

                            <div class="control-group">
                                <button id="reopenCropBtn" class="btn small">重新裁剪图片</button>
                            </div>

                            <div class="control-group">
                                <label for="imageRepeat">平铺方式</label>
                                <select id="imageRepeat">
                                    <option value="no-repeat">不平铺</option>
                                    <option value="repeat" selected>平铺</option>
                                    <option value="repeat-x">水平平铺</option>
                                    <option value="repeat-y">垂直平铺</option>
                                </select>
                            </div>

                            <div class="control-group">
                                <label for="imageFit">适应方式</label>
                                <select id="imageFit">
                                    <option value="contain">包含全图</option>
                                    <option value="cover" selected>填满书签</option>
                                    <option value="center">居中显示</option>
                                </select>
                            </div>

                            <div class="control-group">
                                <label for="imageOpacity">不透明度</label>
                                <input type="range" id="imageOpacity" min="0" max="100" value="100">
                                <span id="imageOpacityValue">100%</span>
                            </div>

                            <div class="control-group">
                                <button id="extractColorsBtn" class="btn">从图片提取颜色到背景板</button>
                            </div>
                        </div>

                        <!-- 几何图案设置 -->
                        <div class="bg-settings" id="pattern-settings" style="display: none;">
                            <div class="control-group">
                                <label for="patternType">图案类型</label>
                                <select id="patternType">
                                    <option value="stripes">斜条纹</option>
                                    <option value="hexagons">六边形网格</option>
                                    <option value="dots">圆点</option>
                                    <option value="zigzag">锯齿形</option>
                                </select>
                            </div>
                            <div class="control-group">
                                <label for="patternColor1">主要颜色</label>
                                <input type="color" id="patternColor1" value="#FFFFFF">
                            </div>
                            <div class="control-group">
                                <label for="patternColor2">次要颜色</label>
                                <input type="color" id="patternColor2" value="#000000">
                            </div>
                            <div class="control-group">
                                <label for="patternSize">图案大小</label>
                                <input type="range" id="patternSize" min="5" max="50" value="20">
                                <span id="patternSizeValue">20px</span>
                            </div>
                            <div class="control-group">
                                <label for="patternAngle">图案角度</label>
                                <input type="range" id="patternAngle" min="0" max="360" value="45">
                                <span id="patternAngleValue">45°</span>
                            </div>
                        </div>
                    </div>

                    <!-- 背景板设置面板 -->
                    <div class="tab-pane" id="board-tab" style="display: none;">
                        <h3>背景板设置</h3>
                        <div class="control-group">
                            <label for="boardColor">背景板颜色</label>
                            <input type="color" id="boardColor" value="#F5F5F5">
                        </div>
                        <div class="control-group">
                            <label for="boardRatio">背景板比例</label>
                            <select id="boardRatio">
                                <option value="3:4" selected>3:4 (默认)</option>
                                <option value="1:1">1:1 (正方形)</option>
                                <option value="4:3">4:3 (横向)</option>
                                <option value="16:9">16:9 (宽屏)</option>
                                <option value="custom">自定义</option>
                            </select>
                        </div>
                        <div class="control-group board-size">
                            <div class="size-input">
                                <label for="boardWidth">宽度</label>
                                <input type="number" id="boardWidth" min="200" max="800" value="400">
                                <span>px</span>
                            </div>
                            <div class="size-input">
                                <label for="boardHeight">高度</label>
                                <input type="number" id="boardHeight" min="200" max="800" value="533">
                                <span>px</span>
                            </div>
                        </div>
                        <div class="control-group">
                            <label for="bookmarkScale">书签缩放</label>
                            <input type="range" id="bookmarkScale" min="30" max="100" value="100">
                            <span id="bookmarkScaleValue">100%</span>
                        </div>
                        <div class="control-group">
                            <label for="boardGradientType">渐变类型</label>
                            <select id="boardGradientType">
                                <option value="none">无渐变</option>
                                <option value="linear" selected>线性渐变</option>
                                <option value="radial">径向渐变</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label for="boardGradientAngle">渐变角度</label>
                            <input type="range" id="boardGradientAngle" min="0" max="360" value="45">
                            <span id="boardGradientAngleValue">45°</span>
                        </div>
                        <div class="control-group gradient-positions">
                            <label>渐变位置</label>
                            <div class="position-controls">
                                <div class="position-control">
                                    <span class="color-preview" style="background-color: #FF0000;"></span>
                                    <input type="range" id="gradientPos1" min="0" max="100" value="0">
                                    <span id="gradientPos1Value">0%</span>
                                </div>
                                <div class="position-control">
                                    <span class="color-preview" style="background-color: #00FF00;"></span>
                                    <input type="range" id="gradientPos2" min="0" max="100" value="50">
                                    <span id="gradientPos2Value">50%</span>
                                </div>
                                <div class="position-control">
                                    <span class="color-preview" style="background-color: #0000FF;"></span>
                                    <input type="range" id="gradientPos3" min="0" max="100" value="100">
                                    <span id="gradientPos3Value">100%</span>
                                </div>
                            </div>
                        </div>
                        <div class="control-group">
                            <button id="applyExtractedColors" class="btn small" style="display: none;">应用提取的颜色到背景板</button>
                        </div>
                        <div class="control-group">
                            <p class="hint">提示：可以从图片提取颜色应用到背景板</p>
                        </div>
                    </div>

                    <!-- 位置设置面板 -->
                    <div class="tab-pane" id="position-tab" style="display: none;">
                        <h3>书签位置</h3>
                        <div class="control-group">
                            <label for="bookmarkPosition">预设位置</label>
                            <select id="bookmarkPosition">
                                <option value="center">居中</option>
                                <option value="top">顶部居中</option>
                                <option value="bottom">底部居中</option>
                                <option value="left">左侧居中</option>
                                <option value="right">右侧居中</option>
                                <option value="custom">自定义</option>
                            </select>
                        </div>
                        <div class="control-group position-controls">
                            <div class="position-input">
                                <label for="bookmarkX">X位置</label>
                                <input type="number" id="bookmarkX" min="0" value="0">
                                <select id="bookmarkXUnit">
                                    <option value="px">像素</option>
                                    <option value="percent" selected>百分比</option>
                                </select>
                            </div>
                            <div class="position-input">
                                <label for="bookmarkY">Y位置</label>
                                <input type="number" id="bookmarkY" min="0" value="15">
                                <select id="bookmarkYUnit">
                                    <option value="px">像素</option>
                                    <option value="percent" selected>百分比</option>
                                </select>
                            </div>
                        </div>
                        <div class="control-group">
                            <p class="hint">提示：您也可以直接拖动书签调整位置</p>
                        </div>
                    </div>

                    <!-- 阴影设置面板 -->
                    <div class="tab-pane" id="shadow-tab" style="display: none;">
                        <h3>书签阴影</h3>
                        <div class="control-group">
                            <label>
                                <input type="checkbox" id="shadowEnabled" checked>
                                启用阴影
                            </label>
                        </div>

                        <div id="shadowSettings">
                            <div class="control-group">
                                <label for="shadowType">阴影类型</label>
                                <select id="shadowType">
                                    <option value="drop">普通阴影</option>
                                    <option value="3d" selected>3D立体阴影</option>
                                    <option value="glow">发光效果</option>
                                </select>
                            </div>

                            <div class="control-group">
                                <label for="shadowColor">阴影颜色</label>
                                <input type="color" id="shadowColor" value="#000000">
                            </div>

                            <div class="control-group">
                                <label for="shadowOpacity">不透明度</label>
                                <input type="range" id="shadowOpacity" min="0" max="100" value="50">
                                <span id="shadowOpacityValue">50%</span>
                            </div>

                            <div class="control-group">
                                <label for="shadowBlur">模糊半径</label>
                                <input type="range" id="shadowBlur" min="0" max="50" value="10">
                                <span id="shadowBlurValue">10px</span>
                            </div>

                            <div class="control-group">
                                <label for="shadowOffsetX">水平偏移</label>
                                <input type="range" id="shadowOffsetX" min="-50" max="50" value="5">
                                <span id="shadowOffsetXValue">5px</span>
                            </div>

                            <div class="control-group">
                                <label for="shadowOffsetY">垂直偏移</label>
                                <input type="range" id="shadowOffsetY" min="-50" max="50" value="5">
                                <span id="shadowOffsetYValue">5px</span>
                            </div>

                            <div class="control-group" id="shadow3dSettings">
                                <label for="shadowDepth">阴影深度</label>
                                <input type="range" id="shadowDepth" min="1" max="30" value="10">
                                <span id="shadowDepthValue">10px</span>
                            </div>

                            <div class="control-group" id="shadowGlowSettings" style="display: none;">
                                <label for="shadowSpread">扩散范围</label>
                                <input type="range" id="shadowSpread" min="0" max="50" value="5">
                                <span id="shadowSpreadValue">5px</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- JavaScript 文件 -->
    <script src="js/canvas.js"></script>
    <script src="js/layers.js"></script>
    <script src="js/backgrounds.js"></script>
    <script src="js/shadow.js"></script>
    <script src="js/export.js"></script>
    <script src="js/main.js"></script>
</body>
</html>